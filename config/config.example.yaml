# Google Contacts Sync Configuration Example
# ===========================================
#
# This is an example configuration file showing all available options.
# Copy this file to ~/.gcontact-sync/config.yaml and customize as needed.
#
# To get started:
#   1. Run: gcontact-sync init-config
#      This will create ~/.gcontact-sync/config.yaml with these defaults
#   2. Edit the config file to uncomment and modify options
#   3. Run gcontact-sync commands - CLI arguments will override config values
#
# Note: CLI arguments always take precedence over configuration file values.

# Logging Options
# ---------------

# Enable verbose output with detailed logging
# Useful for understanding what the sync process is doing
# Default: false
# CLI equivalent: --verbose or -v
# verbose: true

# Show debug information including sample matches and unmatched contacts
# Provides detailed diagnostic output for troubleshooting
# Default: false
# CLI equivalent: --debug
# debug: false

# Custom log directory path
# Default: ~/.gcontact-sync/logs
# Environment variable: GCONTACT_SYNC_LOG_FILE
# log_dir: /path/to/logs


# Sync Behavior
# -------------

# Preview changes without applying them (dry-run mode)
# Useful for testing sync behavior before making actual changes
# Default: false
# CLI equivalent: --dry-run
# dry_run: false

# Force full sync by ignoring sync tokens
# This will compare all contacts in both accounts instead of just changes
# Use this if you suspect sync state is out of date
# Default: false
# CLI equivalent: --full
# full: false

# Conflict resolution strategy when the same contact is modified in both accounts
# Options:
#   - last_modified: Use the most recently modified version (recommended)
#   - newest: Alias for last_modified
#   - account1: Always prefer changes from account1
#   - account2: Always prefer changes from account2
#   - manual: Prompt for each conflict (not yet implemented)
# Default: last_modified
# CLI equivalent: --strategy <value>
# strategy: last_modified


# Backup Options
# --------------

# Automatically create backup before each sync operation
# Provides a safety net for recovering from accidental data loss
# Backups are stored as JSON files with timestamp naming
# Default: true
# CLI equivalent: --no-backup (to disable)
# backup_enabled: true

# Directory where backups are stored
# Each backup is saved as backup_YYYYMMDD_HHMMSS.json
# Default: ~/.gcontact-sync/backups
# backup_dir: ~/.gcontact-sync/backups

# Number of backups to keep (oldest are automatically deleted)
# Set to 0 to keep all backups (no automatic deletion)
# Default: 10
# backup_retention_count: 10


# API Options
# -----------

# Number of contacts to fetch per API page
# Higher values may be faster but use more memory
# Default: 100
# api_page_size: 100

# Maximum contacts per batch operation (create/update/delete)
# Google API has a limit of 200 per batch
# Default: 200
# api_batch_size: 200

# Maximum retry attempts for failed/rate-limited API calls
# Default: 5
# api_max_retries: 5

# Initial backoff delay in seconds when retrying
# Each retry doubles the delay up to api_max_retry_delay
# Default: 1.0
# api_initial_retry_delay: 1.0

# Maximum backoff delay in seconds
# Default: 60.0
# api_max_retry_delay: 60.0


# Contact Matching Options
# ------------------------

# Fuzzy name matching threshold (0.0 to 1.0)
# Contacts with name similarity >= this value AND shared email/phone are matched
# Higher values require closer matches. Lower values may create false matches.
# Default: 0.85 (85% similarity required)
# name_similarity_threshold: 0.85

# Threshold for name-only matches (no shared email/phone)
# Must be very high to avoid false positives
# Default: 0.95 (95% similarity required)
# name_only_threshold: 0.95

# Threshold for uncertain matches that trigger LLM review
# Contacts with similarity between this and name_similarity_threshold
# may be sent to LLM for verification
# Default: 0.7 (70%)
# uncertain_threshold: 0.7

# Maximum contacts to send to LLM per batch when reviewing uncertain matches
# Default: 20
# llm_batch_size: 20

# Enable organization-based matching as a secondary signal
# When enabled, contacts with similar names AND shared organization will match
# even if they don't share email/phone (useful for corporate contacts)
# Default: true
# use_organization_matching: true


# Duplicate Handling
# ------------------
# How to handle potential duplicates when one account has merged contacts
# and the other has them split. For example:
#   Account 1: "Jim Harris" (email: a@x.com), "Jim Harris" (email: b@x.com)
#   Account 2: "Jim Harris" (emails: a@x.com, b@x.com)
#
# Options:
#   - skip: Don't create duplicates, log them for manual review (safest)
#   - auto_merge: Merge identifiers into the matched contact (cleanest result)
#   - report_only: Create the contact but track it in the report
#
# Default: skip
# duplicate_handling: skip


# LLM Options
# -----------

# Anthropic API key can be configured via:
# 1. anthropic_api_key: "sk-..." (NOT RECOMMENDED - don't commit secrets)
# 2. anthropic_api_key_env: MY_CUSTOM_VAR (read from custom env var)
# 3. Default: ANTHROPIC_API_KEY environment variable
#
# For AWS Secrets Manager, use:
#   eval "$(uv run --python 3.12 --with boto3 ~/bin/pull-env -c default -a api-credentials 2>/dev/null | grep ANTHROPIC)"
#
# anthropic_api_key_env: MY_ANTHROPIC_KEY

# Claude model to use for contact matching decisions
# Default: claude-haiku-4-5-20250514
# llm_model: claude-haiku-4-5-20250514

# Maximum tokens for single contact match responses
# Default: 500
# llm_max_tokens: 500

# Maximum tokens for batch contact match responses
# Default: 2000
# llm_batch_max_tokens: 2000


# Authentication Options
# ----------------------

# Timeout in seconds for authentication network requests
# Default: 10
# auth_timeout: 10


# Daemon Options
# --------------
# Run gcontact-sync as a background service with automatic scheduling.
# Use 'gcontact-sync daemon start' to run in daemon mode.

# Enable daemon mode (can also be controlled via CLI)
# When true, the daemon will start automatically when the service is enabled
# Default: false
# CLI equivalent: --daemon (planned)
# daemon_enabled: false

# Sync interval for daemon mode
# Specifies how often the daemon should run a sync operation
# Supports time units: s (seconds), m (minutes), h (hours), d (days)
# Examples: 30m, 1h, 6h, 1d
# Can also specify just a number (interpreted as seconds)
# Default: 1h (1 hour)
# CLI equivalent: --interval <value>
# daemon_interval: 1h

# PID file location for daemon process
# The daemon writes its process ID to this file for management
# Used by 'daemon stop' and 'daemon status' commands
# Default: ~/.gcontact-sync/daemon.pid
# daemon_pid_file: ~/.gcontact-sync/daemon.pid


# Advanced Options
# ----------------

# Custom configuration directory path
# Default: ~/.gcontact-sync
# Environment variable: GCONTACT_SYNC_CONFIG_DIR
# CLI equivalent: --config-dir <path>
# config_dir: /path/to/config


# Example Configurations
# ----------------------
#
# Conservative (preview before sync):
#   dry_run: true
#   verbose: true
#   strategy: last_modified
#
# Production (automatic sync):
#   dry_run: false
#   verbose: false
#   strategy: last_modified
#
# Debugging (detailed output):
#   verbose: true
#   debug: true
#   dry_run: true
#
# Account preference (always trust account1):
#   strategy: account1
#   verbose: true
#
# Strict matching (fewer false positives):
#   name_similarity_threshold: 0.9
#   name_only_threshold: 0.98
#   uncertain_threshold: 0.8
#
# Relaxed matching (more matches found):
#   name_similarity_threshold: 0.75
#   name_only_threshold: 0.9
#   uncertain_threshold: 0.6
#
# Faster API operations (for large contact lists):
#   api_page_size: 500
#   api_batch_size: 200
#
# Disable backups for advanced users (faster syncs):
#   backup_enabled: false
#
# Custom backup location with extended retention:
#   backup_dir: /path/to/custom/backups
#   backup_retention_count: 30
#
# Keep all backups (no automatic deletion):
#   backup_enabled: true
#   backup_retention_count: 0
#
# Daemon mode (automatic background sync):
#   daemon_enabled: true
#   daemon_interval: 1h
#   verbose: false
#
# Daemon mode with frequent syncs (for testing):
#   daemon_enabled: true
#   daemon_interval: 5m
#   verbose: true
#
# Daemon mode with custom PID file:
#   daemon_enabled: true
#   daemon_interval: 6h
#   daemon_pid_file: /var/run/gcontact-sync.pid


# Quick Start Examples
# --------------------
#
# 1. First-time setup:
#    gcontact-sync auth --account account1
#    gcontact-sync auth --account account2
#    gcontact-sync sync --dry-run --verbose
#
# 2. Regular sync (with this config file):
#    gcontact-sync sync
#
# 3. One-time override of config:
#    gcontact-sync sync --strategy account1
#    (This overrides the strategy set in this config)
#
# 4. Full resync:
#    gcontact-sync sync --full --verbose
#
# 5. Run daemon in foreground (for testing):
#    gcontact-sync daemon start --foreground --interval 30s
#
# 6. Start daemon in background:
#    gcontact-sync daemon start --interval 1h
#
# 7. Check daemon status:
#    gcontact-sync daemon status
#
# 8. Stop running daemon:
#    gcontact-sync daemon stop
#
# 9. Install as system service (Linux/macOS):
#    gcontact-sync daemon install --interval 1h


# Security Notes
# --------------
#
# - This config file contains sync preferences, NOT credentials
# - OAuth credentials are stored separately in your config directory:
#   - credentials.json (OAuth client credentials from Google Cloud Console)
#   - token_account1.json (Generated after first auth - Account 1)
#   - token_account2.json (Generated after first auth - Account 2)
# - NEVER commit credentials to version control
# - This example file is safe to commit and share (no secrets)
